import { NextRequest, NextResponse } from 'next/server'; import { prisma } from '@/lib/db'; export async function POST(req:NextRequest){ const form=await req.formData(); const name=String(form.get('name')||''); const email=String(form.get('email')||''); const message=String(form.get('message')||''); if(!name||!email||!message) return NextResponse.json({error:'Missing fields'},{status:400}); await prisma.contactMessage.create({ data:{ name,email,message }}); return NextResponse.redirect(new URL('/contact?sent=1', req.url)); }
